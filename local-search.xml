<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>一文读透 ARP 协议</title>
    <link href="/2022/09/08/network-arp/"/>
    <url>/2022/09/08/network-arp/</url>
    
    <content type="html"><![CDATA[<ul><li><a href="#%E4%B8%80%E6%96%87%E8%AF%BB%E9%80%8F-arp-%E5%8D%8F%E8%AE%AE">一文读透 ARP 协议</a><ul><li><a href="#%E8%AE%A4%E8%AF%86-mac-%E5%9C%B0%E5%9D%80">认识 MAC 地址</a></li><li><a href="#arp-%E6%98%AF%E4%BB%80%E4%B9%88">ARP 是什么</a><ul><li><a href="#arp-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6">ARP 的工作机制</a></li><li><a href="#arp-%E7%BC%93%E5%AD%98">ARP 缓存</a></li></ul></li><li><a href="#arp-%E7%BB%93%E6%9E%84">ARP 结构</a></li><li><a href="#arp-%E6%8A%93%E5%8C%85%E5%AE%9E%E6%88%98">ARP 抓包实战</a></li><li><a href="#arp-%E7%BC%93%E5%AD%98%E8%B6%85%E6%97%B6">ARP 缓存超时</a></li><li><a href="#rarp">RARP</a></li><li><a href="#arp-%E6%94%BB%E5%87%BB">ARP 攻击</a><ul><li><a href="#arp-%E6%94%BB%E5%87%BB%E5%88%86%E7%B1%BB">ARP 攻击分类</a></li></ul></li><li><a href="#%E6%80%BB%E7%BB%93">总结</a></li></ul></li></ul><p>只要确定了 IP 地址后，就能够向这个 IP 地址所在的主机发送数据报，这是我们所熟知的事情。但是再往深了想，IP 地址只是标识网络层的地址，那么在网络层下方数据链路层是不是也有一个地址能够告诉对方主机自己的地址呢？是的，这个地址就是<code>MAC 地址</code>。</p><h2 id="认识-MAC-地址"><a href="#认识-MAC-地址" class="headerlink" title="认识 MAC 地址"></a>认识 MAC 地址</h2><p>MAC 地址的全称是 <code>Media Access Control Address</code>，译为媒体访问控制地址，它是网络上以太网或网络适配器的唯一标识符。MAC 地址能够区分不同的网络接口，并用于多种网络技术，尤其是大多数 IEEE 802 网络。</p><blockquote><p>MAC 地址也称为物理地址，硬件地址和老化地址。</p></blockquote><p>MAC 地址主要用于识别数据链路中互联的节点，如下图所示</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227i83yktj219i0lydj9.jpg" alt="image-20220509155601471"></p><div align = "center">图 7-1</div><p>MAC 地址长 48 bit，在使用<code>网卡(NIC)</code> 的情况下，MAC 地址一般都会烧入 ROM 中。因此，任何一个网卡的 MAC 地址都是唯一的。MAC 地址的结构如下</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227iiqd36j213s0i6780.jpg" alt="image-20220509155619113"></p><div align = "center">图 7-2</div><p>MAC 地址中的 3 - 24 位表示厂商识别码，每个 NIC 厂商都有特定唯一的识别数字。25 - 48 位是厂商内部为识别每个网卡而用。因此，可以保证全世界不会有相同 MAC 地址的网卡。</p><blockquote><p>MAC 地址也有例外情况，即 MAC 地址也会有重复的时候，但是问题不大，只要两个 MAC 地址是属于不同的数据链路层就不会出现问题。</p></blockquote><h2 id="ARP-是什么"><a href="#ARP-是什么" class="headerlink" title="ARP 是什么"></a>ARP 是什么</h2><p>ARP 协议的全称是 <code>Address Resolution Protocol(地址解析协议)</code>，它是一个通过<strong>用于实现从 IP 地址到 MAC 地址的映射，即询问目标 IP 对应的 MAC 地址</strong> 的一种协议。ARP 协议在 IPv4 中极其重要。</p><blockquote><p>注意：ARP 只用于 IPv4 协议中，IPv6 协议使用的是 Neighbor Discovery Protocol，译为邻居发现协议，它被纳入 ICMPv6 中。</p></blockquote><p>简而言之，ARP 就是一种解决地址问题的协议，它以 IP 地址为线索，定位下一个应该接收数据分包的主机 MAC 地址。如果目标主机不在同一个链路上，那么会查找下一跳路由器的 MAC 地址。</p><h3 id="ARP-的工作机制"><a href="#ARP-的工作机制" class="headerlink" title="ARP 的工作机制"></a>ARP 的工作机制</h3><p>下面我们探讨一下 ARP 的工作机制是怎样的。假设 A 和 B 位于同一链路，不需要经过路由器的转换，主机 A 向主机 B 发送一个 IP 分组，主机 A 的地址是 192.168.1.2 ，主机 B 的地址是 192.168.1.3，它们都不知道对方的 MAC 地址是啥，主机 C 和 主机 D 是同一链路的其他主机。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227iz6usej21si0ra77j.jpg" alt="image-20220509155645228"></p><div align = "center">图 7-3</div><p>主机 A 想要获取主机 B 的 MAC 地址，通过主机 A 会通过<code>广播</code> 的方式向以太网上的所有主机发送一个 <code>ARP 请求包</code>，这个 ARP 请求包中包含了主机 A 想要知道的主机 B 的 IP 地址的 MAC 地址。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227jbwtstj21rc0qe79v.jpg" alt="image-20220509155705448"></p><div align = "center">图 7-4</div><p>主机 A 发送的 ARP 请求包会被同一链路上的所有主机&#x2F;路由器接收并进行解析。每个主机&#x2F;路由器都会检查 ARP 请求包中的信息，如果 ARP 请求包中的<code>目标 IP 地址</code> 和自己的相同，就会将自己主机的 MAC 地址写入响应包返回主机 A。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227jm6h9oj21rg0qsjvp.jpg" alt="image-20220509155721862"></p><div align = "center">图 7-5</div><p>由此，可以通过 ARP 从 IP 地址获取 MAC 地址，实现同一链路内的通信。</p><blockquote><p>如果是不同链路怎么办呢？</p></blockquote><p>这就要使用到 <code>代理 ARP</code> 了，通常 ARP 会被路由器隔离，但是采用代理 ARP (ARP Proxy) 的路由器可以将 ARP 请求转发给临近的网段。使多个网段中的节点像是在同一网段内通信。</p><h3 id="ARP-缓存"><a href="#ARP-缓存" class="headerlink" title="ARP 缓存"></a>ARP 缓存</h3><p>现在你知道了发送一次 IP 分组前通过发送一次 ARP 请求就能够确定 MAC 地址。那么是不是每发送一次都得经过广播 -&gt; 封装 ARP 响应 -&gt; 返回给主机这一系列流程呢？</p><p>想想看，浏览器是如何做的呢？浏览器内置了缓存能够缓存你最近经常使用的地址，那么 ARP 也是一样的。ARP 高效运行的关键就是维护每个主机和路由器上的 <code>ARP 缓存(或表)</code>。这个缓存维护着每个 IP 到 MAC 地址的映射关系。通过把第一次 ARP 获取到的 MAC 地址作为 IP 对 MAC 的映射关系到一个 ARP 缓存表中，下一次再向这个地址发送数据报时就不再需要重新发送 ARP 请求了，而是直接使用这个缓存表中的 MAC 地址进行数据报的发送。每发送一次 ARP 请求，缓存表中对应的映射关系都会被清除。</p><p>通过 ARP 缓存，降低了网络流量的使用，在一定程度上防止了 ARP 的大量广播。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227k3i9fej21rc0s043r.jpg" alt="image-20220509155749741"></p><div align = "center">图 7-6</div><p>一般来说，发送过一次 ARP 请求后，再次发送相同请求的几率比较大，因此使用 ARP 缓存能够减少 ARP 包的发送，除此之外，不仅仅 ARP 请求的发送方能够缓存 ARP 接收方的 MAC 地址，接收方也能够缓存 ARP 请求方的 IP 和 MAC 地址，如下所示</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227ke8srdj21qh0u0q84.jpg" alt="image-20220509155806642"></p><div align = "center">图 7-7</div><p>不过，<strong>MAC 地址的缓存有一定期限，超过这个期限后，缓存的内容会被清除</strong>。</p><p>我们可以在 Linux 或者 Windows 中使用 arp 命令查看 ARP 缓存。选项 -a 用于显示两个系统缓存中所有的缓存项。</p><p>在 Linux 中使用 arp 查询缓存</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227ksmu8dj20ze05mt9o.jpg" alt="image-20220509155829967"></p><div align = "center">图 7-8</div><p>主要包含五项</p><ul><li>主机名 — 对应一个 IP 地址</li><li>硬件地址类型</li><li>硬件地址</li><li>标志</li><li>本地网络接口</li></ul><p>标志主要分为<code>三类</code>: C 、M 或 P，C 表示的是由 ARP 协议动态学习。M 类可以通过 arp -s 增加一条。P 类表示的是 <code>发布</code>，对于任何 P 类项目，主机对输入的 ARP 请求都返回一个 ARP 响应。这个选项用于配置代理 ARP。</p><p>比如我们在 Windows 中可以使用 arp -a 进行缓存查询（arp -a 用于查询计算机中的 ARP 缓存表）</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227lcwvplj20u00vb0wv.jpg" alt="image-20220509155902458"></p><div align = "center">图 7-9</div><p>Windows 中的 ARP 程序显示了 IPv4 的地址，它的接口是十六进制数，Windows 版本还指出地址是手动输入还是 ARP 动态学习的。在上面的例子中，既有静态的也有动态的。48 位的 MAC 地址被显示为 6 个十六进制数，在 Linux 中使用 <code>:</code> 号，在 Windows 中使用 <code>-</code> 进行分隔。</p><h2 id="ARP-结构"><a href="#ARP-结构" class="headerlink" title="ARP 结构"></a>ARP 结构</h2><p>我们上面说到，ARP 对想要知道 MAC 地址的目标主机会首先发送 ARP 请求，那么这个请求中都携带哪些信息呢？下面 cxuan 就来和你聊一下。下面是在以太网中转换一个 IPv4 的地址常用的 ARP 请求或响应的报文格式。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227lv7lr0j21wk0oa79j.jpg" alt="image-20220509155931133"></p><div align = "center">图 7-10</div><p>前面 14 个字节构成标准以太网的首部，前两个字段 DST 和 SRC 分别表示 <code>以太网的目的地址</code> 和 <code>以太网的源地址</code>，以太网的目的地址如果是 <code>ff:ff:ff:ff:ff:ff</code> 全部为 1 表示广播地址，在同一广播域中的所有以太网接口可以接收这些帧。后面紧跟着的是 ARP 请求的长度&#x2F;类型，ARP 请求 和 ARP 应答这个值为 <code>0x0806</code>。</p><ul><li><code>硬件类型</code>表示硬件地址的类型，硬件地址常见的有 MAC 物理或者以太网地址，对于以太网来说，此值为 1。</li><li><code>协议类型</code> 指出映射的协议地址类型，对于 IPv4 地址，这个值是 <code>0x0800</code>。</li><li><code>硬件大小</code>和 <code>协议大小</code> 分别指出硬件地址和协议地址的字节数。对于以太网中使用 IPv4 的 ARP 请求或应答，它们的值分别是 6 和 4。</li><li><code>Op</code> 字段指出如果是 ARP 请求，Op &#x3D; 1，ARP 应答 ，Op &#x3D; 2，RARP 请求 Op &#x3D; 3，RARP 应答，Op &#x3D; 4。</li><li>紧跟在 Op 之后的是 <code>发送方硬件地址(MAC 地址)</code>，<code>发送方的协议地址(IPv4 地址)</code>，<code>目的硬件地址</code> 和 <code>目的协议地址</code>。</li></ul><h2 id="ARP-抓包实战"><a href="#ARP-抓包实战" class="headerlink" title="ARP 抓包实战"></a>ARP 抓包实战</h2><p>我们分别演示在 Mac 和 Linux 下的 ARP 报文的截获</p><p>在 Mac 环境下，我这边使用的是 <code>WireShark</code> 进行抓包，你可以从官网下载，地址如下</p><p><a href="https://links.jianshu.com/go?to=https://www.wireshark.org/download.html">https://www.wireshark.org/download.html</a></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227m4o5awj218e0hkdhf.jpg" alt="image-20220509155947764"></p><div align = "center">图 7-11</div><p>下载完成后阅读安装说明的手册，阅读后会发现需要安装两个插件，根据提示安装即可，然后我们打开 WireShark ，开始报文拦截，下面是我解惑的 ARP 数据包</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227mab8phj218e06amzt.jpg" alt="image-20220509155956676"></p><div align = "center">图 7-12</div><p>这款软件很好的一个地方是对不同的数据包会有不同的颜色标识，这点非常好。</p><p>然后我们查看 ARP 请求</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227mhsid9j218s0ky0yw.jpg" alt="image-20220509160008630"></p><div align = "center">图 7-13</div><p>可以看到，这就是一个完整的 ARP 请求包，我们使用的硬件类型是以太网，协议类型是 IPv4 ，默认值是 0x0800，然后硬件大小是 6 个字节，协议大小占用 2 个字节，Op 的全称是 Opcode ，Op &#x3D; 1 表示这是一个 ARP 请求，然后是发送方的硬件地址和协议地址，接收方的硬件地址和协议地址。</p><p>ARP 响应如下</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227mpqvdlj218w0iwgr0.jpg" alt="image-20220509160021140"></p><div align = "center">图 7-14</div><p>可以看到 Op &#x3D; 2，表示这是 ARP 响应。</p><p>在 Linux 环境下，你可以使用 <code>tcpdump</code> 截获 ARP 数据包，如果 tcpdump not found 的话，你可以使用 <code>yum install -y tcpdump</code> 安装。</p><p>使用 <code>tcpdump -i ens33</code> 可以打印出在 ens33 地址下的数据包，下面是我截取的 ARP 数据包。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227mwb6x9j218e08egqn.jpg" alt="image-20220509160031899"></p><div align = "center">图 7-15</div><p>更多关于 tcpdump 的用法，你可以参考这篇博客</p><p><a href="https://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html">https://www.cnblogs.com/ggjucheng/archive/2012/01/14/2322659.html</a></p><p>大佬写的很详细，这里就不再说明了。</p><h2 id="ARP-缓存超时"><a href="#ARP-缓存超时" class="headerlink" title="ARP 缓存超时"></a>ARP 缓存超时</h2><p>缓存超时通常与 ARP 缓存中的项有关系，arp 命令可以允许管理员设置永不超时。ARP 把保存在高速缓存中的每一映射地址都设置生存时间，一般为 20 分钟。如果是不完整的映射，那么缓存超时时间为 3 分钟，不完整的映射通常会强制发送一条不存在主机的 ARP 请求。</p><h2 id="RARP"><a href="#RARP" class="headerlink" title="RARP"></a>RARP</h2><p>与 ARP 相对的，<code>RARP(Reverse Address Resolution Protocol)</code> 是将 ARP 反过来，从 MAC 地址定位 IP 地址的一种协议，将打印机服务器等小型嵌入式设备接入网络时会使用到。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227nhltdij21k40awgmu.jpg" alt="image-20220509160105593"></p><div align = "center">图 7-16</div><p>平常我们设置 IP 地址一般会有两种方式，<code>手动设置</code> 和 <code>DHCP 动态获取</code></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227nnmhvvj21760m60x4.jpg" alt="image-20220509160115514"></p><div align = "center">图 7-17</div><p>但是对于嵌入式设备来说，它没有任何输入接口，也无法通过 DHCP 获取动态地址。</p><p>在这种情况下，就要使用到 RARP 了，你需要准备一个 RARP 服务器，在这个服务器上注册设备的 MAC 地址和 IP 地址，然后将设备接入网络，设备会发出一条 IP 和 MAC 地址的查询请求给服务器，服务器会告诉设备其 IP 地址和 MAC 地址。</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h227ny0xf3j21fa0gygn9.jpg" alt="image-20220509160131417"></p><div align = "center">图 7-18</div><h2 id="ARP-攻击"><a href="#ARP-攻击" class="headerlink" title="ARP 攻击"></a>ARP 攻击</h2><p><strong>ARP 是一种非常不安全的协议</strong>，目前已经有很多涉及 ARP 的攻击，最主要的就是使用代理 ARP 功能假扮主机，对 ARP 请求作出应答，通过伪造 ARP 数据包来窃取合法用户的通信数据，造成影响网络传输速率和盗取用户隐私信息等严重危害。</p><h3 id="ARP-攻击分类"><a href="#ARP-攻击分类" class="headerlink" title="ARP 攻击分类"></a>ARP 攻击分类</h3><p>ARP 主要攻击方式分为下面这几种</p><ul><li><code>ARP 泛洪攻击</code>：通过向网关发送大量 ARP 报文，导致网关无法正常响应。首先发送大量的 ARP 请求报文，然后又发送大量虚假的 ARP 响应报文，从而造成网关部分的 CPU 利用率上升难以响应正常服务请求，而且网关还会被错误的 ARP 缓存表充满导致无法更新维护正常 ARP 缓存表，消耗网络带宽资源。</li><li><code>ARP 欺骗主机攻击</code>：ARP 欺骗主机的攻击也是 ARP 众多攻击类型中很常见的一种。攻击者通过 ARP 欺骗使得局域网内被攻击主机发送给网关的流量信息实际上都发送给攻击者。主机刷新自己的 ARP 使得在自己的 ARP 缓存表中对应的 MAC 为攻击者的 MAC，这样一来其他用户要通过网关发送出去的数据流就会发往主机这里，这样就会造成用户的数据外泄。</li><li><code>欺骗网关的攻击</code>: 欺骗网关就是把别的主机发送给网关的数据通过欺骗网关的形式使得这些数据通过网关发送给攻击者。这种攻击目标选择的不是个人主机而是局域网的网关，这样就会攻击者源源不断的获取局域网内其他用户韵数据．造成数据的泄露，同时用户电脑中病毒的概率也会提升。</li><li><code>中间人攻击</code>: 中间人攻击是同时欺骗局域网内的主机和网关，局域网中用户的数据和网关的数据会发给同一个攻击者，这样，用户与网关的数据就会泄露。</li><li><code>IP地址冲突攻击</code>: 通过对局域网中的物理主机进行扫描，扫描出局域网中的物理主机的 MAC 地址，然后根据物理主机的 MAC 进行攻击，导致局域网内的主机产生 IP 地址冲突，影响用户的网络正常使用。</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>ARP 是 TCP&#x2F;IP 实现中的一个基本协议，它通常在应用程序或用户没有察觉到的情况下运行。ARP 可以用于映射 IP 地址为 MAC 地址。</p><p><strong>这篇文章我们主要讲了 ARP 的基本原理，ARP 的帧结构，ARP 的工作机制，以及 ARP 代理、ARP 攻击、RARP 和 ARP 的区别</strong>等。</p>]]></content>
    
    
    
    <tags>
      
      <tag>计算机网络</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>路由交换综合练习</title>
    <link href="/2022/09/04/Routing%20Comprehensive%20Exercise/"/>
    <url>/2022/09/04/Routing%20Comprehensive%20Exercise/</url>
    
    <content type="html"><![CDATA[<blockquote><blockquote><h1 id="综合练习-paper"><a href="#综合练习-paper" class="headerlink" title="综合练习.paper"></a>综合练习.paper</h1></blockquote><hr><p><strong>@author：Lee.poch</strong></p><p><strong>@time: 2022&#x2F;5&#x2F;26</strong></p><p><strong>@software:Typora</strong></p></blockquote><h2 id="配置要求"><a href="#配置要求" class="headerlink" title="配置要求"></a>配置要求</h2><ul><li><p>任务 1：设备命名</p><p>​ 修改设备名称与显示名称一致，注意大小写</p></li><li><p>任务 2：链路聚合</p><p>为了保证链路的稳定性，在 S1 和 S2 之间配置链路聚合，请通过 LACP 模式实现二层链路聚合，聚合接口 ID 为 5。</p></li><li><p>任务 3：配置 VLAN</p><p>按图示进行 VLAN 配置，并实现 VLAN 间通信。</p></li><li><p>任务 4：VRRP 配置</p><p>1.在 S1 和 S2 上创建两个虚拟组分配是 11 和 12，11 组上的虚拟组 IP：10.11.11.254，12 组上的虚拟组 IP：10.12.12.254.</p><p>2.11 组选择 S1 上为 master，12 组选择 S2 上的 VLAN 12 为 master，优先级都设置为 200，备用网关优先级默认。</p></li><li><p>任务 5：RSTP 配置</p><p>1.vlan 11 和 vlan12 的流量进行负载分担。</p><p>2.S1 为实例 11 跟桥，为实例 12 备用根桥（根桥优先级为 4096 和备份根桥优先级 8192）。</p><p>3.S2 为实例 12 根桥，为实例 11 备用根桥（根桥优先级为 4096 和备份根桥优先级 8192）。</p><p>3.S3 和 S4 连接用户的接口不要参与 STP 计算。</p><p>4.配置域名为 scitc，并配置域内 VLAN 和实例的映射关系（VLAN11 映射实例 11，VLAN12 映射实例 12）。</p></li><li><p>任务 6：IP 地址配置</p><p>1.按图示给各接口配置 IP 地址；</p><p>2.使用全局方式在 DHCP 设备上配置 DHCP 服务器，地址池分别为 v11 和 v12，DNS：119.6.6.6，地址租约时间为 90 分钟。</p><p>3.设置 DHCP 中继转发。</p></li><li><p>任务 7：通信配置</p><ol><li><p>内网使用 RIPv2 路由协议通信。</p><p>2.出外网使用默认路由。</p><p>3.将默认路由重分布进 RIP</p></li></ol></li><li><p>任务 8：出口设计</p><p>​ 1.将 WWW 服务器设置静态 NAT，全局地址为 200.1.1.3</p><p>2.PAT 配置：全局地址编号为 1，全局地址池为：200.1.1.4 -200.1.1.6，内网地址使用 ACL2000 指定范围，使用两个条件，让 VLAN11 和 VLAN12 内的主机上公网。</p></li><li><p>任务 9：远程登录配置</p><p>开启 FW 远程登录，用户认证方为 AAA，用户名为 jw，密码为 jw@2020,加密方式为 cipher，服务类型为 Telnet，配置服务器的用户权限等级为 3 级，设置同时在线人数为 5 人，认证方式为 aaa。</p></li></ul><h2 id="拓扑图"><a href="#拓扑图" class="headerlink" title="拓扑图"></a>拓扑图</h2><p><a href="#"><img src="https://s1.ax1x.com/2022/05/26/XVakUx.png"></a></p><h2 id="配置详细过程"><a href="#配置详细过程" class="headerlink" title="配置详细过程"></a>配置详细过程</h2><h3 id="任务一：设备命名"><a href="#任务一：设备命名" class="headerlink" title="任务一：设备命名"></a>任务一：设备命名</h3><h4 id="S1"><a href="#S1" class="headerlink" title="S1:"></a>S1:</h4><div class="code-wrapper"><pre><code class="hljs vim"><span class="hljs-symbol">&lt;Huawei&gt;</span><span class="hljs-built_in">system</span>-<span class="hljs-keyword">view</span>[Huawei]un in <span class="hljs-keyword">en</span>[Huawei]sysname S1</code></pre></div><h4 id="S2"><a href="#S2" class="headerlink" title="S2:"></a>S2:</h4><div class="code-wrapper"><pre><code class="hljs vim"><span class="hljs-symbol">&lt;Huawei&gt;</span><span class="hljs-built_in">system</span>-<span class="hljs-keyword">view</span>[Huawei]un in <span class="hljs-keyword">en</span>[Huawei]sysname S2</code></pre></div><h4 id="S3"><a href="#S3" class="headerlink" title="S3:"></a>S3:</h4><div class="code-wrapper"><pre><code class="hljs vim"><span class="hljs-symbol">&lt;Huawei&gt;</span><span class="hljs-built_in">system</span>-<span class="hljs-keyword">view</span>[Huawei]un in <span class="hljs-keyword">en</span>[Huawei]sysname S3</code></pre></div><h4 id="S4"><a href="#S4" class="headerlink" title="S4:"></a>S4:</h4><div class="code-wrapper"><pre><code class="hljs vim"><span class="hljs-symbol">&lt;Huawei&gt;</span><span class="hljs-built_in">system</span>-<span class="hljs-keyword">view</span>[Huawei]un in <span class="hljs-keyword">en</span>[Huawei]sysname S4</code></pre></div><h4 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP:"></a>DHCP:</h4><div class="code-wrapper"><pre><code class="hljs vim"><span class="hljs-symbol">&lt;Huawei&gt;</span><span class="hljs-built_in">system</span>-<span class="hljs-keyword">view</span>[Huawei]un in <span class="hljs-keyword">en</span>[Huawei]sysname DHCP</code></pre></div><h4 id="FW"><a href="#FW" class="headerlink" title="FW:"></a>FW:</h4><div class="code-wrapper"><pre><code class="hljs vim"><span class="hljs-symbol">&lt;Huawei&gt;</span><span class="hljs-built_in">system</span>-<span class="hljs-keyword">view</span>[Huawei]un in <span class="hljs-keyword">en</span>[Huawei]sysname FW</code></pre></div><h4 id="ISP"><a href="#ISP" class="headerlink" title="ISP:"></a>ISP:</h4><div class="code-wrapper"><pre><code class="hljs vim"><span class="hljs-symbol">&lt;Huawei&gt;</span><span class="hljs-built_in">system</span>-<span class="hljs-keyword">view</span>[Huawei]un in <span class="hljs-keyword">en</span>[Huawei]sysname ISP</code></pre></div><h3 id="任务二：链路聚合"><a href="#任务二：链路聚合" class="headerlink" title="任务二：链路聚合"></a>任务二：链路聚合</h3><h4 id="S1："><a href="#S1：" class="headerlink" title="S1："></a>S1：</h4><div class="code-wrapper"><pre><code class="hljs less"><span class="hljs-selector-attr">[S1]</span><span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">Eth-Trunk</span> <span class="hljs-number">5</span><span class="hljs-selector-attr">[S1-Eth-Trunk5]</span><span class="hljs-selector-tag">mode</span> <span class="hljs-selector-tag">lacp-static</span><span class="hljs-selector-attr">[S1-Eth-Trunk5]</span><span class="hljs-selector-tag">trunkport</span> <span class="hljs-selector-tag">GigabitEthernet</span> <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">2</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">3</span><span class="hljs-selector-tag">Info</span>: <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">operation</span> <span class="hljs-selector-tag">may</span> <span class="hljs-selector-tag">take</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">few</span> <span class="hljs-selector-tag">seconds</span>. <span class="hljs-selector-tag">Please</span> <span class="hljs-selector-tag">wait</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">moment</span>..<span class="hljs-selector-class">.done</span>.<span class="hljs-selector-attr">[S1-Eth-Trunk5]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">trunk</span><span class="hljs-selector-attr">[S1-Eth-Trunk5]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">trunk</span> <span class="hljs-selector-tag">allow-pass</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S1-Eth-Trunk5]</span><span class="hljs-selector-tag">q</span></code></pre></div><h4 id="S2："><a href="#S2：" class="headerlink" title="S2："></a>S2：</h4><div class="code-wrapper"><pre><code class="hljs asciidoc">[S2]interface Eth-Trunk 5[S2-Eth-Trunk5]mode lacp-static[S2-Eth-Trunk5]trunkport GigabitEthernet 0/0/2 to 0/0/3Info: This operation may take a few seconds. Please wait for a moment...done.[S2-Eth-Trunk5]port link-type trunk[S2-Eth-Trunk5]port trunk allow-pass vlan 11 to 14[S2-Eth-Trunk5]q[S2]display eth-trunk 5Eth-Trunk5&#x27;s state information is:Local:LAG ID: 5                   WorkingMode: STATICPreempt Delay: Disabled     Hash arithmetic: According to SIP-XOR-DIPSystem Priority: 32768      System ID: 4c1f-cc5f-3fabLeast Active-linknumber: 1  Max Active-linknumber: 8<span class="hljs-section">Operate status: up          Number Of Up Port In Trunk: 2</span><span class="hljs-section">--------------------------------------------------------------------------------</span>ActorPortName          Status   PortType PortPri PortNo PortKey PortState WeightGigabitEthernet0/0/2   Selected 1GE      32768   3      1329    10111100  1GigabitEthernet0/0/3   Selected 1GE      32768   4      1329    10111100  1<span class="hljs-section">Partner:</span><span class="hljs-section">--------------------------------------------------------------------------------</span>ActorPortName          SysPri   SystemID        PortPri PortNo PortKey PortStateGigabitEthernet0/0/2   32768    4c1f-cc8f-6c0c  32768   3      1329    10111100GigabitEthernet0/0/3   32768    4c1f-cc8f-6c0c  32768   4      1329    10111100</code></pre></div><h3 id="任务三：配置-VLAN"><a href="#任务三：配置-VLAN" class="headerlink" title="任务三：配置 VLAN"></a>任务三：配置 VLAN</h3><h4 id="S1-1"><a href="#S1-1" class="headerlink" title="S1:"></a>S1:</h4><div class="code-wrapper"><pre><code class="hljs less"><span class="hljs-selector-attr">[S1]</span><span class="hljs-selector-tag">vlan</span> <span class="hljs-selector-tag">batch</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-tag">Info</span>: <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">operation</span> <span class="hljs-selector-tag">may</span> <span class="hljs-selector-tag">take</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">few</span> <span class="hljs-selector-tag">seconds</span>. <span class="hljs-selector-tag">Please</span> <span class="hljs-selector-tag">wait</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">moment</span>..<span class="hljs-selector-class">.done</span>.<span class="hljs-selector-attr">[S1]</span><span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">Vlanif</span> <span class="hljs-number">11</span><span class="hljs-selector-attr">[S1-Vlanif11]</span><span class="hljs-selector-tag">ip</span> <span class="hljs-selector-tag">address</span> <span class="hljs-number">10.11</span><span class="hljs-selector-class">.11</span><span class="hljs-selector-class">.1</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[S1-Vlanif11]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[S1]</span><span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">Vlanif</span> <span class="hljs-number">12</span><span class="hljs-selector-attr">[S1-Vlanif12]</span><span class="hljs-selector-tag">ip</span> <span class="hljs-selector-tag">address</span> <span class="hljs-number">10.12</span><span class="hljs-selector-class">.12</span><span class="hljs-selector-class">.1</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[S1-Vlanif12]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[S1]</span><span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">Vlanif</span> <span class="hljs-number">13</span><span class="hljs-selector-attr">[S1-Vlanif13]</span><span class="hljs-selector-tag">ip</span> <span class="hljs-selector-tag">address</span> <span class="hljs-number">10.13</span><span class="hljs-selector-class">.13</span><span class="hljs-selector-class">.1</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[S1-Vlanif13]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[S1]</span><span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">g</span> <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><span class="hljs-selector-attr">[S1-GigabitEthernet0/0/1]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">access</span><span class="hljs-selector-attr">[S1-GigabitEthernet0/0/1]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">default</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">13</span><span class="hljs-selector-attr">[S1-GigabitEthernet0/0/1]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[S1]</span><span class="hljs-selector-tag">port-group</span> <span class="hljs-selector-tag">group-member</span> <span class="hljs-selector-tag">g</span> <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">20</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">g</span> <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">21</span><span class="hljs-selector-attr">[S1-port-group]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">trunk</span><span class="hljs-selector-attr">[S1-GigabitEthernet0/0/20]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">trunk</span><span class="hljs-selector-attr">[S1-GigabitEthernet0/0/21]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">trunk</span><span class="hljs-selector-attr">[S1-port-group]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">trunk</span> <span class="hljs-selector-tag">allow-pass</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S1-GigabitEthernet0/0/20]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">trunk</span> <span class="hljs-selector-tag">allow-pass</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S1-GigabitEthernet0/0/21]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">trunk</span> <span class="hljs-selector-tag">allow-pass</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S1-port-group]</span><span class="hljs-selector-tag">q</span></code></pre></div><h4 id="S2-1"><a href="#S2-1" class="headerlink" title="S2:"></a>S2:</h4><div class="code-wrapper"><pre><code class="hljs less"><span class="hljs-selector-attr">[S2]</span><span class="hljs-selector-tag">vlan</span> <span class="hljs-selector-tag">batch</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-tag">Info</span>: <span class="hljs-selector-tag">This</span> <span class="hljs-selector-tag">operation</span> <span class="hljs-selector-tag">may</span> <span class="hljs-selector-tag">take</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">few</span> <span class="hljs-selector-tag">seconds</span>. <span class="hljs-selector-tag">Please</span> <span class="hljs-selector-tag">wait</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">moment</span>..<span class="hljs-selector-class">.done</span>.<span class="hljs-selector-attr">[S2]</span><span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">Vlanif</span> <span class="hljs-number">11</span><span class="hljs-selector-attr">[S2-Vlanif11]</span><span class="hljs-selector-tag">ip</span> <span class="hljs-selector-tag">address</span> <span class="hljs-number">10.11</span><span class="hljs-selector-class">.11</span><span class="hljs-selector-class">.2</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[S2-Vlanif11]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[S2]</span><span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">Vlanif</span> <span class="hljs-number">12</span><span class="hljs-selector-attr">[S2-Vlanif12]</span><span class="hljs-selector-tag">ip</span> <span class="hljs-selector-tag">address</span> <span class="hljs-number">10.12</span><span class="hljs-selector-class">.12</span><span class="hljs-selector-class">.2</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[S2-Vlanif12]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[S2]</span><span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">Vlanif</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S2-Vlanif14]</span><span class="hljs-selector-tag">ip</span> <span class="hljs-selector-tag">address</span> <span class="hljs-number">10.14</span><span class="hljs-selector-class">.14</span><span class="hljs-selector-class">.1</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[S2-Vlanif14]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[S2]</span><span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">g</span> <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><span class="hljs-selector-attr">[S2-GigabitEthernet0/0/1]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">access</span><span class="hljs-selector-attr">[S2-GigabitEthernet0/0/1]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">default</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S2-GigabitEthernet0/0/1]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[S2]</span><span class="hljs-selector-tag">port-group</span> <span class="hljs-selector-tag">group-member</span> <span class="hljs-selector-tag">g</span> <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">20</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">g</span> <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">21</span><span class="hljs-selector-attr">[S2-port-group]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">trunk</span><span class="hljs-selector-attr">[S2-GigabitEthernet0/0/20]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">trunk</span><span class="hljs-selector-attr">[S2-GigabitEthernet0/0/21]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">trunk</span><span class="hljs-selector-attr">[S2-port-group]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">trunk</span> <span class="hljs-selector-tag">allow-pass</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S2-GigabitEthernet0/0/20]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">trunk</span> <span class="hljs-selector-tag">allow-pass</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S2-GigabitEthernet0/0/21]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">trunk</span> <span class="hljs-selector-tag">allow-pass</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-number">11</span> <span class="hljs-selector-tag">to</span> <span class="hljs-number">14</span><span class="hljs-selector-attr">[S2-port-group]</span><span class="hljs-selector-tag">q</span></code></pre></div><h4 id="S3-1"><a href="#S3-1" class="headerlink" title="S3:"></a>S3:</h4><div class="code-wrapper"><pre><code class="hljs gradle">[S3]vlan batch <span class="hljs-number">11</span> to <span class="hljs-number">14</span>Info: <span class="hljs-keyword">This</span> operation may take a few seconds. Please wait <span class="hljs-keyword">for</span> a moment...done.[S3]port-<span class="hljs-keyword">group</span> <span class="hljs-keyword">group</span>-member e <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">20</span> to e <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">21</span>[S3-port-<span class="hljs-keyword">group</span>]port link-type trunk[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">20</span>]port link-type trunk[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">21</span>]port link-type trunk[S3-port-<span class="hljs-keyword">group</span>]port trunk allow-pass vlan <span class="hljs-number">11</span> to <span class="hljs-number">14</span>[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">20</span>]port trunk allow-pass vlan <span class="hljs-number">11</span> to <span class="hljs-number">14</span>[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">21</span>]port trunk allow-pass vlan <span class="hljs-number">11</span> to <span class="hljs-number">14</span>[S3-port-<span class="hljs-keyword">group</span>]q[S3]<span class="hljs-keyword">int</span> e <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port link-type access[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port <span class="hljs-keyword">default</span> vlan <span class="hljs-number">11</span>[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]q[S3]<span class="hljs-keyword">int</span> e <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>]port link-type access[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>]port <span class="hljs-keyword">default</span> vlan <span class="hljs-number">12</span>[S3-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>]q</code></pre></div><h4 id="S4-1"><a href="#S4-1" class="headerlink" title="S4:"></a>S4:</h4><div class="code-wrapper"><pre><code class="hljs gradle">[S4]vlan batch <span class="hljs-number">11</span>  to <span class="hljs-number">14</span>Info: <span class="hljs-keyword">This</span> operation may take a few seconds. Please wait <span class="hljs-keyword">for</span> a moment...done.[S4]port-<span class="hljs-keyword">group</span> <span class="hljs-keyword">group</span>-member e <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">20</span> to e <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">21</span>[S4-port-<span class="hljs-keyword">group</span>]port link-type trunk[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">20</span>]port link-type trunk[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">21</span>]port link-type trunk[S4-port-<span class="hljs-keyword">group</span>]port trunk allow-pass vlan <span class="hljs-number">11</span> to <span class="hljs-number">14</span>[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">20</span>]port trunk allow-pass vlan <span class="hljs-number">11</span> to <span class="hljs-number">14</span>[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">21</span>]port trunk allow-pass vlan <span class="hljs-number">11</span> to <span class="hljs-number">14</span>[S4-port-<span class="hljs-keyword">group</span>]q[S4]<span class="hljs-keyword">int</span> e <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port link-type access[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port <span class="hljs-keyword">default</span> vlan <span class="hljs-number">11</span>[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]q[S4]<span class="hljs-keyword">int</span> e <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>]port link-type access[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>]port <span class="hljs-keyword">default</span> vlan <span class="hljs-number">12</span>[S4-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>]q</code></pre></div><h3 id="任务四：VRRP-配置"><a href="#任务四：VRRP-配置" class="headerlink" title="任务四：VRRP 配置"></a>任务四：VRRP 配置</h3><h4 id="S1：-1"><a href="#S1：-1" class="headerlink" title="S1："></a>S1：</h4><div class="code-wrapper"><pre><code class="hljs csharp">[<span class="hljs-meta">S1</span>]<span class="hljs-built_in">int</span> Vlanif <span class="hljs-number">11</span>[<span class="hljs-meta">S1-Vlanif11</span>]vrrp vrid <span class="hljs-number">11</span> <span class="hljs-keyword">virtual</span>-ip <span class="hljs-number">10.11</span><span class="hljs-number">.11</span><span class="hljs-number">.254</span>[<span class="hljs-meta">S1-Vlanif11</span>]vrrp vrid <span class="hljs-number">11</span> priority <span class="hljs-number">200</span>[<span class="hljs-meta">S1-Vlanif11</span>]q[<span class="hljs-meta">S1</span>]<span class="hljs-built_in">int</span> Vlanif <span class="hljs-number">12</span>[<span class="hljs-meta">S1-Vlanif12</span>]vrrp vrid <span class="hljs-number">12</span> <span class="hljs-keyword">virtual</span>-ip <span class="hljs-number">10.12</span><span class="hljs-number">.12</span><span class="hljs-number">.254</span>[<span class="hljs-meta">S1-Vlanif12</span>]q</code></pre></div><h4 id="S2：-1"><a href="#S2：-1" class="headerlink" title="S2："></a>S2：</h4><div class="code-wrapper"><pre><code class="hljs csharp">[<span class="hljs-meta">S2</span>]<span class="hljs-built_in">int</span> Vlanif <span class="hljs-number">11</span>[<span class="hljs-meta">S2-Vlanif11</span>]vrrp vrid <span class="hljs-number">11</span> <span class="hljs-keyword">virtual</span>-ip <span class="hljs-number">10.11</span><span class="hljs-number">.11</span><span class="hljs-number">.254</span>[<span class="hljs-meta">S2-Vlanif11</span>]q[<span class="hljs-meta">S2</span>]<span class="hljs-built_in">int</span> Vlanif <span class="hljs-number">12</span>[<span class="hljs-meta">S2-Vlanif12</span>]vrrp vrid <span class="hljs-number">12</span> <span class="hljs-keyword">virtual</span>-ip <span class="hljs-number">10.12</span><span class="hljs-number">.12</span><span class="hljs-number">.254</span>[<span class="hljs-meta">S2-Vlanif12</span>]vrrp vrid <span class="hljs-number">12</span> priority <span class="hljs-number">200</span>[<span class="hljs-meta">S2-Vlanif12</span>]q</code></pre></div><h3 id="任务五：MSTP-配置"><a href="#任务五：MSTP-配置" class="headerlink" title="任务五：MSTP 配置"></a>任务五：MSTP 配置</h3><h4 id="S1-2"><a href="#S1-2" class="headerlink" title="S1:"></a>S1:</h4><div class="code-wrapper"><pre><code class="hljs smali">[S1]stp region-configuration[S1-mst-region]region-name scitc[S1-mst-region]instance 11 vlan 11[S1-mst-region]instance 12 vlan 12[S1-mst-region]active region-configurationInfo: This operation may take a few seconds. Please wait for a moment...done.[S1-mst-region]q[S1]stp<span class="hljs-built_in"> instance </span>11 priority 4096[S1]stp<span class="hljs-built_in"> instance </span>12 priority 8192</code></pre></div><h4 id="S2-2"><a href="#S2-2" class="headerlink" title="S2:"></a>S2:</h4><div class="code-wrapper"><pre><code class="hljs smali">[S2]stp region-configuration[S2-mst-region]region-name scitc[S2-mst-region]instance 11 vlan 11[S2-mst-region]instance 12 vlan 12[S2-mst-region]active region-configurationInfo: This operation may take a few seconds. Please wait for a moment...done.[S2-mst-region]q[S2]stp<span class="hljs-built_in"> instance </span>11 priority 8192[S2]stp<span class="hljs-built_in"> instance </span>12 priority 4096</code></pre></div><h4 id="S3-2"><a href="#S3-2" class="headerlink" title="S3:"></a>S3:</h4><div class="code-wrapper"><pre><code class="hljs mipsasm">[<span class="hljs-built_in">S3</span>]stp region-configuration[<span class="hljs-built_in">S3</span>-mst-region]region-name <span class="hljs-keyword">scitc</span><span class="hljs-keyword"></span>[<span class="hljs-built_in">S3</span>-mst-region]<span class="hljs-keyword">instance </span><span class="hljs-number">11</span> vlan <span class="hljs-number">11</span>[<span class="hljs-built_in">S3</span>-mst-region]<span class="hljs-keyword">instance </span><span class="hljs-number">12</span> vlan <span class="hljs-number">12</span>[<span class="hljs-built_in">S3</span>-mst-region]active region-configuration[<span class="hljs-built_in">S3</span>-mst-region]q</code></pre></div><h4 id="S4-2"><a href="#S4-2" class="headerlink" title="S4:"></a>S4:</h4><div class="code-wrapper"><pre><code class="hljs mipsasm">[<span class="hljs-built_in">S4</span>]stp region-configuration[<span class="hljs-built_in">S4</span>-mst-region]region-name <span class="hljs-keyword">scitc</span><span class="hljs-keyword"></span>[<span class="hljs-built_in">S4</span>-mst-region]<span class="hljs-keyword">instance </span><span class="hljs-number">11</span> vlan <span class="hljs-number">11</span>[<span class="hljs-built_in">S4</span>-mst-region]<span class="hljs-keyword">instance </span><span class="hljs-number">12</span> vlan <span class="hljs-number">12</span>[<span class="hljs-built_in">S4</span>-mst-region]active region-configuration[<span class="hljs-built_in">S4</span>-mst-region]q</code></pre></div><h3 id="任务六：IP-地址配置"><a href="#任务六：IP-地址配置" class="headerlink" title="任务六：IP 地址配置"></a>任务六：IP 地址配置</h3><h4 id="DHCP-1"><a href="#DHCP-1" class="headerlink" title="DHCP:"></a>DHCP:</h4><div class="code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-attr">[DHCP]</span>int g <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><span class="hljs-selector-attr">[DHCP-GigabitEthernet0/0/0]</span>ip <span class="hljs-selector-tag">address</span> <span class="hljs-number">10.20</span>.<span class="hljs-number">20.20</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[DHCP-GigabitEthernet0/0/0]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[DHCP]</span>dhcp enable<span class="hljs-selector-attr">[DHCP]</span>ip pool v11<span class="hljs-selector-attr">[DHCP-ip-pool-v11]</span>network <span class="hljs-number">10.11</span>.<span class="hljs-number">11.0</span> <span class="hljs-attribute">mask</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[DHCP-ip-pool-v11]</span>gateway-list <span class="hljs-number">10.11</span>.<span class="hljs-number">11.254</span><span class="hljs-selector-attr">[DHCP-ip-pool-v11]</span>dns-list <span class="hljs-number">119.6</span>.<span class="hljs-number">6.6</span>Info<span class="hljs-selector-pseudo">:Part</span> of the domain-name-server IP has already exist.<span class="hljs-selector-attr">[DHCP-ip-pool-v11]</span>lease day <span class="hljs-number">0</span> hour <span class="hljs-number">1</span> minute <span class="hljs-number">30</span><span class="hljs-selector-attr">[DHCP-ip-pool-v11]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[DHCP]</span>ip pool v12<span class="hljs-selector-attr">[DHCP-ip-pool-v12]</span>network <span class="hljs-number">10.12</span>.<span class="hljs-number">12.0</span> <span class="hljs-attribute">mask</span> <span class="hljs-number">24</span><span class="hljs-selector-attr">[DHCP-ip-pool-v12]</span>gateway-list <span class="hljs-number">10.12</span>.<span class="hljs-number">12.254</span><span class="hljs-selector-attr">[DHCP-ip-pool-v12]</span>dns-list <span class="hljs-number">119.6</span>.<span class="hljs-number">6.6</span>Info<span class="hljs-selector-pseudo">:Part</span> of the domain-name-server IP has already exist.<span class="hljs-selector-attr">[DHCP-ip-pool-v12]</span>lease day <span class="hljs-number">0</span> hour <span class="hljs-number">1</span> minute <span class="hljs-number">30</span><span class="hljs-selector-attr">[DHCP-ip-pool-v12]</span><span class="hljs-selector-tag">q</span><span class="hljs-selector-attr">[DHCP]</span>int g <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><span class="hljs-selector-attr">[DHCP-GigabitEthernet0/0/0]</span>dhcp select global<span class="hljs-selector-attr">[DHCP-GigabitEthernet0/0/0]</span><span class="hljs-selector-tag">q</span></code></pre></div><h4 id="Core"><a href="#Core" class="headerlink" title="Core:"></a>Core:</h4><div class="code-wrapper"><pre><code class="hljs gradle">[Core]<span class="hljs-keyword">int</span> g <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>[Core-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ip address <span class="hljs-number">10.13</span>.<span class="hljs-number">13.2</span> <span class="hljs-number">24</span>[Core-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]<span class="hljs-keyword">int</span> g <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>[Core-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]ip address <span class="hljs-number">10.14</span>.<span class="hljs-number">14.2</span> <span class="hljs-number">24</span>[Core-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]<span class="hljs-keyword">int</span> g <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>[Core-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]ip address <span class="hljs-number">10.1</span>.<span class="hljs-number">1.1</span> <span class="hljs-number">24</span>[Core-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]<span class="hljs-keyword">int</span> g <span class="hljs-number">4</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>[Core-GigabitEthernet4<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ip address <span class="hljs-number">10.20</span>.<span class="hljs-number">20.1</span> <span class="hljs-number">24</span>[Core-GigabitEthernet4<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]q</code></pre></div><h4 id="FW-1"><a href="#FW-1" class="headerlink" title="FW:"></a>FW:</h4><div class="code-wrapper"><pre><code class="hljs gradle">[FW]<span class="hljs-keyword">int</span> g <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ip address <span class="hljs-number">10.1</span>.<span class="hljs-number">1.2</span> <span class="hljs-number">24</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]<span class="hljs-keyword">int</span> g <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]ip address <span class="hljs-number">10.10</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">24</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]<span class="hljs-keyword">int</span> g <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]ip address <span class="hljs-number">200.1</span>.<span class="hljs-number">1.1</span> <span class="hljs-number">29</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]q</code></pre></div><h4 id="ISP-1"><a href="#ISP-1" class="headerlink" title="ISP:"></a>ISP:</h4><div class="code-wrapper"><pre><code class="hljs gradle">[ISP]<span class="hljs-keyword">int</span> g <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>[ISP-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ip address <span class="hljs-number">200.1</span>.<span class="hljs-number">1.2</span> <span class="hljs-number">29</span>[ISP-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]<span class="hljs-keyword">int</span> g <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>[ISP-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]ip address <span class="hljs-number">201.1</span>.<span class="hljs-number">1.1</span> <span class="hljs-number">30</span>[ISP-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]q</code></pre></div><h4 id="S1-3"><a href="#S1-3" class="headerlink" title="S1:"></a>S1:</h4><div class="code-wrapper"><pre><code class="hljs csharp">[<span class="hljs-meta">S1</span>]dhcp enable[<span class="hljs-meta">S1</span>]<span class="hljs-built_in">int</span> Vlanif <span class="hljs-number">11</span>[<span class="hljs-meta">S1-Vlanif11</span>]dhcp <span class="hljs-keyword">select</span> relay[<span class="hljs-meta">S1-Vlanif11</span>]dhcp relay server-ip <span class="hljs-number">10.20</span><span class="hljs-number">.20</span><span class="hljs-number">.20</span>[<span class="hljs-meta">S1-Vlanif11</span>]<span class="hljs-built_in">int</span> vlan <span class="hljs-number">12</span>[<span class="hljs-meta">S1-Vlanif12</span>]dhcp <span class="hljs-keyword">select</span> relay[<span class="hljs-meta">S1-Vlanif12</span>]dhcp relay server-ip <span class="hljs-number">10.20</span><span class="hljs-number">.20</span><span class="hljs-number">.20</span>[<span class="hljs-meta">S1-Vlanif12</span>]q</code></pre></div><h4 id="S2-3"><a href="#S2-3" class="headerlink" title="S2:"></a>S2:</h4><div class="code-wrapper"><pre><code class="hljs csharp">[<span class="hljs-meta">S2</span>]dhcp enable[<span class="hljs-meta">S2</span>]<span class="hljs-built_in">int</span> Vlanif <span class="hljs-number">11</span>[<span class="hljs-meta">S2-Vlanif11</span>]dhcp <span class="hljs-keyword">select</span> relay[<span class="hljs-meta">S2-Vlanif11</span>]dhcp relay server-ip <span class="hljs-number">10.20</span><span class="hljs-number">.20</span><span class="hljs-number">.20</span>[<span class="hljs-meta">S2-Vlanif11</span>]<span class="hljs-built_in">int</span> vlan <span class="hljs-number">12</span>[<span class="hljs-meta">S2-Vlanif12</span>]dhcp <span class="hljs-keyword">select</span> relay[<span class="hljs-meta">S2-Vlanif12</span>]dhcp relay server-ip <span class="hljs-number">10.20</span><span class="hljs-number">.20</span><span class="hljs-number">.20</span>[<span class="hljs-meta">S2-Vlanif12</span>]q</code></pre></div><h3 id="任务七：通信配置"><a href="#任务七：通信配置" class="headerlink" title="任务七：通信配置"></a>任务七：通信配置</h3><h4 id="Core-1"><a href="#Core-1" class="headerlink" title="Core"></a>Core</h4><div class="code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-attr">[Core]</span>rip <span class="hljs-number">1</span><span class="hljs-selector-attr">[Core-rip-1]</span>version <span class="hljs-number">2</span><span class="hljs-selector-attr">[Core-rip-1]</span>un <span class="hljs-selector-tag">summary</span><span class="hljs-selector-attr">[Core-rip-1]</span>network <span class="hljs-number">10.0</span>.<span class="hljs-number">0.0</span><span class="hljs-selector-attr">[Core-rip-1]</span><span class="hljs-selector-tag">q</span></code></pre></div><h4 id="S1-4"><a href="#S1-4" class="headerlink" title="S1"></a>S1</h4><div class="code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-attr">[S1]</span>rip <span class="hljs-number">1</span><span class="hljs-selector-attr">[S1-rip-1]</span>version <span class="hljs-number">2</span><span class="hljs-selector-attr">[S1-rip-1]</span>un <span class="hljs-selector-tag">summary</span><span class="hljs-selector-attr">[S1-rip-1]</span>network <span class="hljs-number">10.0</span>.<span class="hljs-number">0.0</span><span class="hljs-selector-attr">[S1-rip-1]</span><span class="hljs-selector-tag">q</span></code></pre></div><h4 id="S2-4"><a href="#S2-4" class="headerlink" title="S2"></a>S2</h4><div class="code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-attr">[S2]</span>rip <span class="hljs-number">1</span><span class="hljs-selector-attr">[S2-rip-1]</span>version <span class="hljs-number">2</span><span class="hljs-selector-attr">[S2-rip-1]</span>un <span class="hljs-selector-tag">summary</span><span class="hljs-selector-attr">[S2-rip-1]</span>network <span class="hljs-number">10.0</span>.<span class="hljs-number">0.0</span><span class="hljs-selector-attr">[S2-rip-1]</span><span class="hljs-selector-tag">q</span></code></pre></div><h4 id="FW-2"><a href="#FW-2" class="headerlink" title="FW"></a>FW</h4><div class="code-wrapper"><pre><code class="hljs csharp">[<span class="hljs-meta">FW</span>]ip route-<span class="hljs-keyword">static</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> <span class="hljs-number">0</span> <span class="hljs-number">200.1</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span>[<span class="hljs-meta">FW</span>]rip<span class="hljs-number">1</span>[<span class="hljs-meta">FW-rip-1</span>]version <span class="hljs-number">2</span>[<span class="hljs-meta">FW-rip-1</span>]un summary[<span class="hljs-meta">FW-rip-1</span>]network <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>[<span class="hljs-meta">FW-rip-1</span>]<span class="hljs-literal">default</span>-route originate[<span class="hljs-meta">FW-rip-1</span>]q</code></pre></div><h4 id="DHCP-2"><a href="#DHCP-2" class="headerlink" title="DHCP"></a>DHCP</h4><div class="code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-attr">[DHCP]</span>rip <span class="hljs-number">1</span><span class="hljs-selector-attr">[DHCP]</span>version <span class="hljs-number">2</span><span class="hljs-selector-attr">[DHCP]</span>un <span class="hljs-selector-tag">summary</span><span class="hljs-selector-attr">[DHCP]</span>network <span class="hljs-number">10.0</span>.<span class="hljs-number">0.0</span><span class="hljs-selector-attr">[DHCP]</span><span class="hljs-selector-tag">q</span></code></pre></div><h3 id="任务八-出口设计"><a href="#任务八-出口设计" class="headerlink" title="任务八: 出口设计"></a>任务八: 出口设计</h3><h4 id="FW-3"><a href="#FW-3" class="headerlink" title="FW"></a>FW</h4><div class="code-wrapper"><pre><code class="hljs gradle">[FW]<span class="hljs-keyword">int</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]nat <span class="hljs-keyword">static</span> global <span class="hljs-number">200.1</span>.<span class="hljs-number">1.3</span> inside <span class="hljs-number">10.10</span>.<span class="hljs-number">10.10</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]q[FW]nat address-<span class="hljs-keyword">group</span> <span class="hljs-number">1</span> <span class="hljs-number">200.1</span>.<span class="hljs-number">1.4</span> <span class="hljs-number">200.1</span>.<span class="hljs-number">1.6</span>[FW]acl <span class="hljs-number">2000</span>[FW-acl-basic-<span class="hljs-number">2000</span>]rule  permit <span class="hljs-keyword">source</span> <span class="hljs-number">10.11</span>.<span class="hljs-number">11.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.255</span>[FW-acl-basic-<span class="hljs-number">2000</span>]rule  permit <span class="hljs-keyword">source</span> <span class="hljs-number">10.12</span>.<span class="hljs-number">12.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.255</span>[FW-acl-basic-<span class="hljs-number">2000</span>]q[FW]<span class="hljs-keyword">int</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]nat outbound <span class="hljs-number">2000</span> address-<span class="hljs-keyword">group</span> <span class="hljs-number">1</span>[FW-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]q</code></pre></div><h3 id="任务九：远程登陆配置"><a href="#任务九：远程登陆配置" class="headerlink" title="任务九：远程登陆配置"></a>任务九：远程登陆配置</h3><h4 id="FW-4"><a href="#FW-4" class="headerlink" title="FW"></a>FW</h4><div class="code-wrapper"><pre><code class="hljs pgsql">[FW]<span class="hljs-keyword">user</span>-interface vty <span class="hljs-number">0</span> <span class="hljs-number">4</span>[FW-ui-vty0<span class="hljs-number">-4</span>]authentication-mode aaa[FW-ui-vty0<span class="hljs-number">-4</span>]<span class="hljs-keyword">user</span> privilege <span class="hljs-keyword">level</span> <span class="hljs-number">3</span>[FW-ui-vty0<span class="hljs-number">-4</span>]q[FW]aaa[FW-aaa]<span class="hljs-keyword">local</span>-<span class="hljs-keyword">user</span> jw <span class="hljs-keyword">password</span> cipher jw@<span class="hljs-number">2020</span><span class="hljs-keyword">Info</span>: <span class="hljs-keyword">Add</span> a <span class="hljs-built_in">new</span> <span class="hljs-keyword">user</span>.[FW-aaa]<span class="hljs-keyword">local</span>-<span class="hljs-keyword">user</span>  jw privilege <span class="hljs-keyword">level</span> <span class="hljs-number">3</span>[FW-aaa]<span class="hljs-keyword">local</span>-<span class="hljs-keyword">user</span> jw service-<span class="hljs-keyword">type</span> telnet[FW-aaa]q</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>ensp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>原创</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AC+AP组网基础配置</title>
    <link href="/2022/09/04/ac-ap/"/>
    <url>/2022/09/04/ac-ap/</url>
    
    <content type="html"><![CDATA[<blockquote><blockquote><h1 id="AC-AP-配置"><a href="#AC-AP-配置" class="headerlink" title="AC+AP 配置"></a>AC+AP 配置</h1></blockquote><hr><p><strong>@author：Sunshine</strong></p><p><strong>@time: 2022&#x2F;6&#x2F;15</strong></p><p><strong>@software:Typora,ensp</strong></p></blockquote><h2 id="配置要求"><a href="#配置要求" class="headerlink" title="配置要求"></a>配置要求</h2><ul><li><p>（1）使用 ENSP 软件，根据拓扑图搭建网络环境（建议 AC 使用 6605 型号，AP 使用 6060 型号，交换机使用 3700 型号，不影响评分）或者导入 topo 文件。</p></li><li><p>（2）AP 管理 vlan100 使用地址段 100.100.100.0&#x2F;24 段，用户 AP1 使用 vlan10 地址段为 192.168.10.0&#x2F;24，用户 AP2 使用 vlan20 地址段为 192.168.20.0&#x2F;24。</p></li><li><p>（3）AP1 广播 SSID 名称为 scitc，AP2 广播 SSID 名称为 jiwang，都使用直接转发（本地转发）模式，密码无要求。（域管理模板、ssid 模板、安全管理模板、组名都属于自定义项）</p></li><li><p>（4）STA1 搜索无线网络，并连接上无线网络。</p></li></ul><h2 id="拓扑图"><a href="#拓扑图" class="headerlink" title="拓扑图"></a>拓扑图</h2><p><img src="https://s1.328888.xyz/2022/06/15/pmEFq.png"></p><h2 id="配置详细过程"><a href="#配置详细过程" class="headerlink" title="配置详细过程"></a>配置详细过程</h2><h3 id="AC1-配置"><a href="#AC1-配置" class="headerlink" title="AC1 配置"></a>AC1 配置</h3><ol><li><p>VLAN&amp;&amp;链路配置</p><div class="code-wrapper"><pre><code class="hljs ensp">&lt;AC6605&gt;sysEnter system view, return user view with Ctrl+Z.[AC6605]un in enInfo: Information center is disabled.[AC6605]vlan batch 100 10 20# 创建vlan100 20 10Info: This operation may take a few seconds. Please wait for a moment...done.[AC6605]dhcp enable# 开启DHCP服务Info: The operation may take a few seconds. Please wait for a moment.done.[AC6605]int g 0/0/2[AC6605-GigabitEthernet0/0/2]port link-type trunk# 更改接口类型为trunk[AC6605-GigabitEthernet0/0/2]port trunk allow-pass vlan 100 10 20 # 设置允许通过的vlan[AC6605-GigabitEthernet0/0/2]int vlan 100[AC6605-Vlanif100]description AP_Manage[AC6605-Vlanif100]ip add 192.168.100.1 24[AC6605-Vlanif100]dhcp select interface# DHCP选择源接口[AC6605-Vlanif100]quit[AC6605]int vlan 10[AC6605-Vlanif10]description uSER_AP1[AC6605-Vlanif10]ip add 192.168.10.1 24[AC6605-Vlanif10]dhcp select interface[AC6605-Vlanif10]quit[AC6605]int vlan 100[AC6605-Vlanif100]description uSER_AP2[AC6605-Vlanif100]ip add 192.168.20.1 24Info: IP pool on this interface has been deleted.[AC6605-Vlanif100]dhcp select interface[AC6605-Vlanif100]quit[AC6605]</code></pre></div></li><li><p>WLAN 配置</p><div class="code-wrapper"><pre><code class="hljs ensp">[AC6605]capwap source interface Vlanif 100# capwap隧道绑定vlan[AC6605]wlan# 进入无线配置视图[AC6605-wlan-view]regulatory-domain-profile name office-domain# 创建域管理模板[AC6605-wlan-regulate-domain-office-domain]country-code CN# 配置国家代码Info: The current country code is same with the input country code.[AC6605-wlan-regulate-domain-office-domain]quit[AC6605-wlan-view]ssid-profile name office-ssid-AP1 # 创建SSID模板[AC6605-wlan-ssid-prof-office-ssid-AP1]ssid scitc# 设置SSID名称为scitcInfo: This operation may take a few seconds, please wait.done.[AC6605-wlan-ssid-prof-office-ssid-AP1]quit[AC6605-wlan-view]ssid-profile name office-ssid-AP2[AC6605-wlan-ssid-prof-office-ssid-AP2]ssid jiwangInfo: This operation may take a few seconds, please wait.done.[AC6605-wlan-ssid-prof-office-ssid-AP2]quit[AC6605-wlan-view]security-profile name office-security# 创建安全策略[AC6605-wlan-sec-prof-office-security]security wpa-wpa2 psk pass-phrase 123456789 aes# 设置SSID密码Warning: The current password is too simple. For the sake of security, you are advised to set a password containing at least two of the following: lowercase letters a to z, uppercase letters A to Z, digits, and special characters. Continue? [Y/N]:Y[AC6605-wlan-sec-prof-office-security]vap-profile name office-vap-1# 创建VAP模板[AC6605-wlan-vap-prof-office-vap-1]forward-mode direct-forward# 配置业务数据转发模式[AC6605-wlan-vap-prof-office-vap-1]security-profile office-security# 绑定安全策略Info: This operation may take a few seconds, please wait.done.[AC6605-wlan-vap-prof-office-vap-1]ssid-profile office-ssid-AP1# 绑定SSID模板Info: This operation may take a few seconds, please wait.done.[AC6605-wlan-vap-prof-office-vap-1]service-vlan vlan-id 10# 绑定业务VLANInfo: This operation may take a few seconds, please wait.done.[AC6605-wlan-vap-prof-office-vap-1]quit[AC6605-wlan-view]vap-profile name office-vap-2[AC6605-wlan-vap-prof-office-vap-2]forward-mode direct-forward[AC6605-wlan-vap-prof-office-vap-2]security-profile office-securityInfo: This operation may take a few seconds, please wait.done.[AC6605-wlan-vap-prof-office-vap-2]ssid-profile office-ssid-AP2Info: This operation may take a few seconds, please wait.done.[AC6605-wlan-vap-prof-office-vap-2]service-vlan vlan-id 20Info: This operation may take a few seconds, please wait.done.[AC6605-wlan-vap-prof-office-vap-2]quit</code></pre></div></li><li><p>AP 上线配置</p><div class="code-wrapper"><pre><code class="hljs vbnet">[AC6605-wlan-view]ap-<span class="hljs-keyword">group</span> name office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">1</span># 创建AP组<span class="hljs-symbol">Info:</span> This operation may <span class="hljs-keyword">take</span> a few seconds. Please wait <span class="hljs-keyword">for</span> a moment.done.[AC6605-wlan-ap-<span class="hljs-keyword">group</span>-office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">1</span>]regulatory-domain-profile office-domain# 绑定域模板<span class="hljs-symbol">Warning:</span> Modifying the country code will clear channel, power <span class="hljs-built_in">and</span> antenna gain configurations <span class="hljs-keyword">of</span> the radio <span class="hljs-built_in">and</span> reset the AP. <span class="hljs-keyword">Continue</span>?[Y/N]:Y[AC6605-wlan-ap-<span class="hljs-keyword">group</span>-office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">1</span>]vap-profile office-vap-<span class="hljs-number">1</span> wlan <span class="hljs-number">1</span> radio <span class="hljs-number">0</span><span class="hljs-symbol">Info:</span> This operation may <span class="hljs-keyword">take</span> a few seconds, please wait...done.[AC6605-wlan-ap-<span class="hljs-keyword">group</span>-office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">1</span>]vap-profile office-vap-<span class="hljs-number">1</span> wlan <span class="hljs-number">1</span> radio <span class="hljs-number">1</span><span class="hljs-symbol">Info:</span> This operation may <span class="hljs-keyword">take</span> a few seconds, please wait...done.[AC6605-wlan-ap-<span class="hljs-keyword">group</span>-office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">1</span>]quit[AC6605-wlan-view]ap-id <span class="hljs-number">0</span> ap-mac <span class="hljs-number">00e0</span>-fc93-<span class="hljs-number">52e0</span># 添加AP[AC6605-wlan-ap-<span class="hljs-number">0</span>]ap-<span class="hljs-keyword">group</span> office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">1</span># 添加到AP组中<span class="hljs-symbol">Warning:</span> This operation may cause AP reset. <span class="hljs-keyword">If</span> the country code changes, it will clear channel, power <span class="hljs-built_in">and</span> antenna gain configurations <span class="hljs-keyword">of</span> the radio, Whether <span class="hljs-keyword">to</span> continue? [Y/N]:Y<span class="hljs-symbol">Info:</span> This operation may <span class="hljs-keyword">take</span> a few seconds. Please wait <span class="hljs-keyword">for</span> a moment.. done.[AC6605-wlan-ap-<span class="hljs-number">0</span>]quit[AC6605-wlan-view]ap-<span class="hljs-keyword">group</span> name office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">2</span><span class="hljs-symbol">Info:</span> This operation may <span class="hljs-keyword">take</span> a few seconds. Please wait <span class="hljs-keyword">for</span> a moment.done.[AC6605-wlan-ap-<span class="hljs-keyword">group</span>-office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">2</span>]regulatory-domain-profile office-domain<span class="hljs-symbol">Warning:</span> Modifying the country code will clear channel, power <span class="hljs-built_in">and</span> antenna gain configurations <span class="hljs-keyword">of</span> the radio <span class="hljs-built_in">and</span> reset the AP. <span class="hljs-keyword">Continue</span>?[Y/N]:<span class="hljs-symbol">Error:</span> Please choose <span class="hljs-comment">&#x27;YES&#x27; or &#x27;NO&#x27; first before pressing &#x27;Enter&#x27;. [Y/N]:y</span>[AC6605-wlan-ap-<span class="hljs-keyword">group</span>-office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">2</span>]vap-profile office-vap-<span class="hljs-number">2</span> wlan <span class="hljs-number">1</span> radio <span class="hljs-number">0</span><span class="hljs-symbol">Info:</span> This operation may <span class="hljs-keyword">take</span> a few seconds, please wait...done.[AC6605-wlan-ap-<span class="hljs-keyword">group</span>-office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">2</span>]vap-profile office-vap-<span class="hljs-number">2</span> wlan <span class="hljs-number">1</span> radio <span class="hljs-number">1</span><span class="hljs-symbol">Info:</span> This operation may <span class="hljs-keyword">take</span> a few seconds, please wait...done.[AC6605-wlan-ap-<span class="hljs-keyword">group</span>-office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">2</span>]quit[AC6605-wlan-view]ap-id <span class="hljs-number">1</span> ap-mac <span class="hljs-number">00e0</span>-fce9-<span class="hljs-number">3580</span>[AC6605-wlan-ap-<span class="hljs-number">1</span>]ap-<span class="hljs-keyword">group</span> office-ap-<span class="hljs-keyword">group</span>-<span class="hljs-number">2</span><span class="hljs-symbol">Warning:</span> This operation may cause AP reset. <span class="hljs-keyword">If</span> the country code changes, it will clear channel, power <span class="hljs-built_in">and</span> antenna gain configurations <span class="hljs-keyword">of</span> the radio, Whether <span class="hljs-keyword">to</span> continue? [Y/N]:Y<span class="hljs-symbol">Info:</span> This operation may <span class="hljs-keyword">take</span> a few seconds. Please wait <span class="hljs-keyword">for</span> a moment.. done.[AC6605-wlan-ap-<span class="hljs-number">1</span>]quit</code></pre></div></li></ol><h3 id="LSW1-配置"><a href="#LSW1-配置" class="headerlink" title="LSW1 配置"></a>LSW1 配置</h3><ol><li><p>VLAN&amp;&amp;链路配置</p><div class="code-wrapper"><pre><code class="hljs ensp">&lt;Huawei&gt;sysEnter system view, return user view with Ctrl+Z.[Huawei]un in enInfo: Information center is disabled.[Huawei]vlan batch 100 10 20# 创建vlan100 20 10Info: This operation may take a few seconds. Please wait for a moment...done.[Huawei]int e 0/0/1[Huawei-Ethernet0/0/1]description to_AC[Huawei-Ethernet0/0/1]port link-type trunk[Huawei-Ethernet0/0/1]port trunk allow-pass vlan 100 10 20[Huawei-Ethernet0/0/1]int e 0/0/2[Huawei-Ethernet0/0/2]description to_AP1[Huawei-Ethernet0/0/2]port link-type trunk[Huawei-Ethernet0/0/2]port trunk pvid vlan 100[Huawei-Ethernet0/0/2]port trunk allow-pass vlan 100 10[Huawei-Ethernet0/0/2]quit[Huawei]int e 0/0/3[Huawei-Ethernet0/0/3]description to_AP2[Huawei-Ethernet0/0/3]port link-type trunk[Huawei-Ethernet0/0/3]port trunk pvid vlan 100[Huawei-Ethernet0/0/3]port trunk allow-pass vlan 100 20[Huawei-Ethernet0/0/3]quit</code></pre></div></li></ol>]]></content>
    
    
    <categories>
      
      <category>ensp</category>
      
    </categories>
    
    
    <tags>
      
      <tag>原创</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello world ！</title>
    <link href="/2022/09/03/hello-world/"/>
    <url>/2022/09/03/hello-world/</url>
    
    <content type="html"><![CDATA[<p>恭喜你！ 成功捕获一只小菜鸡 :）</p><p>这是一篇测试文章</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>原创</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
